<%- include("templates/header.ejs", {titulo: "Modificar Cita"}) %>

    <div class="container my-4">
        <h2>Modificar Cita Programada</h2>
        <p class="text-muted">Editando cita con ID: <%= cita._id %></p>
        
        <form action="/api/citas/editar" method="POST">
            <input type="hidden" name="id" value="<%= cita._id %>">

            <div class="mb-3">
                <label for="paciente" class="form-label">ID Paciente</label>
                <input class="form-control" type="text" name="paciente" id="paciente" 
                       value="<%= cita.paciente._id %>" required>
                <small class="form-text text-muted">Paciente actual: **<%= cita.paciente.firstName %> <%= cita.paciente.lastName %>**</small>
            </div>

            <div class="mb-3">
                <label for="dentist" class="form-label">Nombre del Odont√≥logo</label>
                <input class="form-control" type="text" name="dentist" id="dentist" 
                       value="<%= cita.dentist %>" required>
            </div>

            <div class="mb-3">
                <label for="date" class="form-label">Fecha (dd/mm/aaaa)</label>
                <% 
                    // Formateamos la fecha existente a dd/mm/aaaa para mostrarla en el campo de texto
                    const dbDate = new Date(cita.date);
                    const formattedDate = dbDate.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit', year: 'numeric' });
                %>
                <input class="form-control" type="text" name="date" id="date" 
                       value="<%= formattedDate %>" placeholder="dd/mm/aaaa" required>
            </div>

            <button type="submit" class="btn btn-warning">Guardar Cambios</button>
            <a href="/citas" class="btn btn-secondary">Cancelar</a>
        </form>
    </div>

<%- include("templates/flooter.ejs") %>